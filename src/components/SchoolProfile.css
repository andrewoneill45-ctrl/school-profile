.sp-overlay {
  position: fixed; inset: 0; z-index: 500;
  background: rgba(0,0,0,0.35); backdrop-filter: blur(2px);
  display: flex; justify-content: flex-end;
  animation: fadeIn 0.15s ease;
}
.sp-panel {
  width: min(860px, calc(100vw - 80px)); max-width: 100%; height: 100%;
  background: #ffffff; overflow-y: auto; padding: 28px 32px;
  position: relative;
  animation: slideIn 0.25s cubic-bezier(0.16, 1, 0.3, 1);
  box-shadow: -4px 0 24px rgba(0,0,0,0.12);
}
@keyframes slideIn { from { transform: translateX(100%); } }

.sp-close {
  position: sticky; top: 0; float: right; z-index: 10;
  width: 32px; height: 32px; border-radius: 8px;
  background: #f1f5f9; border: none; cursor: pointer;
  font-size: 14px; color: #64748b;
  display: flex; align-items: center; justify-content: center;
}
.sp-close:hover { background: #e2e8f0; }

/* Header */
.sp-header {
  border-left: 4px solid #2672c0; padding-left: 16px;
  margin-bottom: 18px; margin-top: 8px;
}
.sp-phase-badge {
  display: inline-block; font-size: 0.68rem; font-weight: 700;
  text-transform: uppercase; letter-spacing: 0.06em; color: #64748b; margin-bottom: 4px;
}
.sp-name { font-size: 1.3rem; font-weight: 700; line-height: 1.2; color: #0f172a; margin-bottom: 4px; }
.sp-sub { font-size: 0.82rem; color: #64748b; margin-bottom: 8px; }
.sp-ofsted {
  display: inline-block; padding: 3px 12px; border-radius: 99px;
  color: white; font-size: 0.72rem; font-weight: 700;
}

/* Facts grid */
.sp-facts {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 10px; margin-bottom: 18px; padding: 12px;
  background: #f8fafc; border-radius: 10px;
}
.sp-fact-label { display: block; font-size: 0.66rem; color: #94a3b8; font-weight: 600; text-transform: uppercase; letter-spacing: 0.04em; }
.sp-fact-value { display: block; font-size: 0.85rem; font-weight: 700; color: #0f172a; }
.sp-fact-sub { display: block; font-size: 0.66rem; color: #94a3b8; }

/* Headline scores */
.sp-headlines {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(115px, 1fr));
  gap: 10px; margin-bottom: 20px;
}
.sp-headline {
  padding: 10px 12px; background: #f8fafc; border-radius: 8px; text-align: center;
  border: 1px solid #f1f5f9;
}
.sp-hl-label { display: block; font-size: 0.62rem; font-weight: 700; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 2px; }
.sp-hl-value { display: block; font-size: 1.5rem; font-weight: 800; color: #0f172a; line-height: 1.1; }
.sp-hl-meta { display: flex; align-items: center; justify-content: center; gap: 6px; margin-top: 4px; }
.sp-hl-decile {
  display: inline-block; padding: 1px 7px; border-radius: 99px;
  color: white; font-size: 0.62rem; font-weight: 700;
}
.sp-hl-change { font-size: 0.68rem; font-weight: 700; }
.sp-up { color: #0d7a42; }
.sp-down { color: #cc3333; }

/* Section titles */
.sp-section { margin-bottom: 20px; }
.sp-section-header {
  display: flex; align-items: center; justify-content: space-between;
  padding-bottom: 6px; border-bottom: 1px solid #f1f5f9; margin-bottom: 10px;
}
.sp-section-title {
  font-size: 0.78rem; font-weight: 700; text-transform: uppercase;
  letter-spacing: 0.06em; color: #94a3b8; margin-bottom: 10px;
  padding-bottom: 6px; border-bottom: 1px solid #f1f5f9;
}
.sp-info-btn {
  background: none; border: none; font-size: 1.1rem; color: #94a3b8;
  cursor: pointer; padding: 4px 8px; border-radius: 6px; transition: all 120ms;
}
.sp-info-btn:hover { background: #f1f5f9; color: #1d5a9e; }

/* Info overlay */
.sp-info-overlay {
  position: fixed; inset: 0; z-index: 9999; background: rgba(0,0,0,0.4);
  display: flex; align-items: center; justify-content: center; padding: 20px;
}
.sp-info-box {
  background: white; border-radius: 14px; padding: 24px 28px;
  max-width: 520px; width: 100%; position: relative;
  box-shadow: 0 8px 40px rgba(0,0,0,0.15);
}
.sp-info-close {
  position: absolute; top: 12px; right: 14px; background: #f1f5f9;
  border: none; width: 28px; height: 28px; border-radius: 7px;
  cursor: pointer; font-size: 13px; color: #64748b;
  display: flex; align-items: center; justify-content: center;
}
.sp-info-close:hover { background: #e2e8f0; }

/* Decile legend */
.sp-decile-legend {
  display: flex; justify-content: center; gap: 16px; margin-top: 10px;
}
.sp-dl-item { display: flex; align-items: center; gap: 4px; font-size: 0.68rem; color: #64748b; }
.sp-dl-dot { width: 8px; height: 8px; border-radius: 50%; }

/* Gap bars */
.sp-gap-grid { display: flex; flex-direction: column; gap: 10px; }
.sp-gap-row { display: grid; grid-template-columns: 50px 1fr 50px; align-items: center; gap: 8px; }
.sp-gap-label { font-size: 0.72rem; font-weight: 700; color: #475569; }
.sp-gap-bars { display: flex; flex-direction: column; gap: 3px; }
.sp-gap-bar-wrap { display: flex; align-items: center; gap: 6px; }
.sp-gap-bar { height: 10px; border-radius: 5px; transition: width 0.5s cubic-bezier(0.16,1,0.3,1); }
.sp-gap-disadv { background: linear-gradient(90deg, #e8920e, #f59e0b); }
.sp-gap-other { background: linear-gradient(90deg, #1d5a9e, #3b82f6); }
.sp-gap-val { font-size: 0.68rem; font-weight: 700; color: #475569; white-space: nowrap; }
.sp-gap-diff { font-size: 0.66rem; font-weight: 600; color: #94a3b8; text-align: right; }

/* Actions */
.sp-actions {
  display: flex; gap: 8px; padding-top: 16px; border-top: 1px solid #f1f5f9;
  position: sticky; bottom: 0; background: #fff; padding-bottom: 8px;
}
.sp-btn {
  display: flex; align-items: center; gap: 6px;
  padding: 10px 18px; border-radius: 8px; border: none;
  font-family: 'Source Sans 3', sans-serif; font-size: 0.82rem; font-weight: 600; cursor: pointer; transition: all 120ms;
}
.sp-btn-primary { background: #1d5a9e; color: white; }
.sp-btn-primary:hover { background: #143d6b; }
.sp-btn-secondary { background: #f1f5f9; color: #334155; }
.sp-btn-secondary:hover { background: #e2e8f0; }

@media (max-width: 640px) {
  .sp-overlay { align-items: flex-end; justify-content: stretch; }
  .sp-panel { width: 100%; height: 85vh; border-radius: 16px 16px 0 0; }
}

/* Info button */
.sp-info-btn {
  background: #f1f5f9; border: none; border-radius: 50%; width: 28px; height: 28px;
  font-size: 14px; color: #64748b; cursor: pointer; display: flex; align-items: center;
  justify-content: center; transition: all 120ms; flex-shrink: 0;
}
.sp-info-btn:hover { background: #e2e8f0; color: #1d5a9e; }

/* Info overlay */
.sp-info-overlay {
  position: fixed; inset: 0; z-index: 9999; background: rgba(0,0,0,0.4);
  display: flex; align-items: center; justify-content: center; padding: 20px;
}
.sp-info-box {
  background: white; border-radius: 14px; max-width: 480px; width: 100%; padding: 24px;
  box-shadow: 0 16px 48px rgba(0,0,0,0.15); position: relative;
}
.sp-info-x {
  position: absolute; top: 12px; right: 12px; background: #f1f5f9; border: none;
  border-radius: 8px; width: 28px; height: 28px; cursor: pointer; font-size: 12px;
  color: #64748b; display: flex; align-items: center; justify-content: center;
}
.sp-info-x:hover { background: #e2e8f0; }
